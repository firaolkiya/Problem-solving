(()=>{var e={17:e=>{e.exports={takePhoto:async function(e,t,o,r,n,a){const c=e.getContext("2d");if(o&&r){const{username:i}=await chrome.storage.local.get("username"),{currContestID:s}=await chrome.storage.local.get("currContestID");e.width=o,e.height=r,c.drawImage(t,0,0,o,r),e.toBlob((async function(e){const t=new FormData;t.append("files",e,a),t.append("contestID",s),t.append("studentName",i),t.append("imageSource",n),fetch("https://a2sv-contest-monitoring-system.onrender.com/api/v1/upload",{method:"POST",body:t}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).catch((e=>{console.error("Error:",e)}))}),"image/png")}else clearScreenshot()},clearPhoto:function(e){const t=e.getContext("2d");t.fillStyle="#AAA",t.fillRect(0,0,e.width,e.height),e.toDataURL("image/png")}}}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=o(17);const t=520;let r=0,n=!1,a=null,c=null,i=null,s=null;function d(){s=setInterval(l,60*(Math.floor(5*Math.random())+8)*1e3)}function l(){const o=new Date;(0,e.takePhoto)(c,a,t,r,"CAMERA","camera_"+o.getTime()),clearInterval(s),d()}window.addEventListener("load",(function(){a=document.getElementById("cameraVideo"),c=document.getElementById("cameraCanvas"),i=document.getElementById("cameraOutputPhoto"),navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((e=>{a.srcObject=e,a.play()})).catch((e=>{console.error(`An error occurred: ${e}`)})),a.addEventListener("canplay",(e=>{n||(r=a.videoHeight/(a.videoWidth/t),isNaN(r)&&(r=t/(4/3)),a.setAttribute("width",t),a.setAttribute("height",r),c.setAttribute("width",t),c.setAttribute("height",r),n=!0,d())}),!1),(0,e.clearPhoto)(c)}),!1)})()})();